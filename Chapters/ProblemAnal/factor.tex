\section{System definition}\label{sec:SystemDefinition}
As the proposed case from Ipsen, the associated ISO-standards, and related existing solutions have been explored, it is appropriate to outline the system definition.
This is to attain requirements that the future solution needs to include to uphold Ipsen's and the ISO-standard's requirements.
The system definition will eventually lead to the problem statement, which will guide the rest of the project.

Before the system definition is being written, the problems and context will be analyzed through a \textit{rich picture} in \cref{sec:richpictures} and the \textit{FACTOR} criteria in \cref{sec:factorcriteria} \citep{Rod-Aalborg}.
The rich picture aims to describe the situation in which a handbook is being used.
Through the context of this project, the FACTOR critera is being utilized to give an understanding of what system Ipsen needs and in which context the system is used.

A system definition seeks to define which problem the system should solve.
According to  \citep[p.~24]{Rod-Aalborg} it is defined as,

\begin{defn}
	A system definition is a concise description of a computerized system expressed in natural language
\end{defn}

This means that the system definition aims to describe what the system should do, but also in which context is should be used, as the system is going to be ''implemented both technically and socially'' \citep[p.~23]{Rod-Aalborg}.
The system is going to solve a problem that exists in a specific context, it is therefore important to understand this context.

\subsection{Rich picture} \label{sec:richpictures}

To understand the context further a \textit{rich picture} has been made, see \cref{fig:RP-Oversigt}. A rich picture is an ''informal drawing that presents the illustrator's understanding of a situation'' \citep[~p. 26]{Rod-Aalborg}.
This is therefore used to understand how the handbook should be handled as well as to visualize the different types of users and their behavior.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.85\textwidth]{billeder/RP-Oversigt}
	\caption{\textit{The main problem showed in rich pictures
	}}
	\label{fig:RP-Oversigt}
\end{figure}

Based on the first interview with Ipsen, the main outlines of the context and problem to be solved became clear.
The rough outline, also shown in \cref{fig:RP-Oversigt}, is a document management system for handbooks with three types of users. 
These being:
\begin{itemize}
	\item
		\textit{Reader;} who needs access to the newest version of the handbook, being managed, at location.
	\item
		\textit{Writer;} who has the same rights as ''reader''.
		This user type needs further permission to add new versions to the handbook.
	\item
		\textit{Administrator;} who has the same rights as ''writer'' and ''reader''.
		This user type additionally have access to the archived versions of the handbook, and is in charge of managing the other users and assigning them to the different departments as well.
\end{itemize}

When either ''writer'' or ''administrator'' uploads a new version, this goes through an approval process.
If it is denied, the actors usually talks over the phone, and when it is approved the handbook gets updated with the new version.
Whenever a new version of a document has been approved and released, all of the affected employees, called readers in the rich picture, need to read it.
A department head typically in the writer role has the responsibility of keeping track of whether the affected employees has read the newest document.

It is worth noting, that the case where the approval for a new version is denied is the only part of the workflow presented in the rich picture that would be done outside a given system made.

\subsection{FACTOR criteria} \label{sec:factorcriteria}
The FACTOR criterion consists of six elements and can be used to help with the system definition development or describing an existing system.
In this context FACTOR is being used for the former option, which is to help facilitate the system definition development.
FACTOR is an abbreviation of \textit{Functionality}, \textit{Application domain}, \textit{Conditions}, \textit{Technology}, \textit{Objects} and \textit{Responsibility}.
These are defined as follows, \citep[p.~40]{Rod-Aalborg}:
\begin{itemize}
	\item
		''Functionality:
		The system functions that support the application-domain tasks.''
	\item
		''Application domain:
		Those parts of an organization that administrate, monitor, or control a problem domain.''
	\item
		''Conditions:
		The conditions under which the system will be developed and used.''
	\item
		''Technology:
		Both the technology used to develop the system and the technology on which the system will run.''
	\item
		''Objects:
		The main objects in the problem domain.''
	\item
		''Responsibility:
		The systemâ€™s overall responsibility in relation to its context.''
\end{itemize}

\subsection{FACTOR analysis}\label{factor}

\subsubsection*{F - Functionality}
Manage and facilitate an overview of current and earlier versions of assorted files of different types in a handbook, as well as manage files in connection to approval of suppliers.
Files in the handbook may have a changelog.
New files undergoes an approval process before being submitted to the handbook.
Different levels of permissions for users as well as registration of who has read the individual files.
Notify specific users when a new version is released.
It should also be possible to import already existing handbooks to the system.

\subsubsection*{A - Application domain}
Mainly secretaries and the quality manager will administrate the system.
All employees of the organization will have access to the system to read documents and print the handbook.
The department heads will, usually, have partial access to the system, such that they can add new versions.
They will, occasionally, also take part in the approval process of new versions that they themselves have not made.

\subsubsection*{C - Conditions} \label{sec:conditions}
The target group of the system is a small company that needs a cheap document managing solution.
The users mostly have little IT-experience.
Therefore, most of the target groups are also not able to maintain such a system.
Lastly, there should be a backup of the archive making it easy to revert back to the previous system.

\subsubsection*{T - Technology}
The system will be developed in C\# using the web framework ASP.NET Core.
Other technologies such as HTML, CSS and JavaScript/jQuery will also be used to develop the system.
The technologies used to develop the system will be explained in greater detail in \cref{sec:aspnetcore,sec:webfrontends}.
The system will be accessible in the users web browser \footnote{Google Chrome, Mozilla Firefox, Microsoft Edge, Internet Explore etc.} on their PC.
The notifications are sent over e-mail or sms.

\subsubsection*{O - Objects}
The main objects of the problem domain are \textit{Handbook, Table of contents (TOC), documents, changelog} and \textit{user}.
These object will be examined in \cref{sec:Classes}.

\subsubsection*{R  - Responsibility}
Managing file versions.
Including a changelog for each change, depending on the settings.
Provide an overview of all the documents through a TOC.
Making sure all new files or versions are approved before being added to the handbook.
Saving older versions in an archive.
Limiting access into three levels, as stated above in the Functionality section of the criterion.
Keeping track of documents used in the approval process of suppliers and dates for the approval and re-approvals.

\subsection{Final system definition}\label{sec:systemdefinition}
In this section the final system definition is described.
It is based on the aforementioned rich picture in \cref{fig:RP-Oversigt}, FACTOR analysis in \cref{factor} and the interviews with Ipsen.

The system manages files, of different types, in a handbook presented in a updated TOC.
Here each file is uniquely identifiable with ID, title, date of approval, possible end date, and version number.
The identification numbers are individually reserved for a specific title once taken.
Earlier versions of the files are archived, but can only be viewed by the administrator and are not editable.
It is possible to sort the files in the handbook by different attributes.
Furthermore, the system supports a changelog for every file in the handbook.

The system needs three different levels of access rights to the files within the managed handbook, also shown in \cref{fig:RP-Oversigt}.
First level grants access to reading the newest version of the handbook.
Second level further grants rights to add new files to the handbook.
The last level is an administrative level, being in full control of the system.
Users with administrative privileges can assign others to departments and determine which documents are associated with those departments.
The system sends notifications to users of specific departments when relevant changes or versions are uploaded into the system.
Moreover, the system also registers that specific users have read specific document versions.
Reading access to the handbook for any of the levels is possible at any relevant location.

The system supports an approval of suppliers process where a supplier is linked with the relevant documents and a notification is sent to the administrator when supplier documents needs to be updated.
